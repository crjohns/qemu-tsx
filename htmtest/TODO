TODO List for HTM:

Use the general wrapper function to wrap stores.
One difficulty is that a lot of the code seems to use the old register indices,
this needs to be dealt with.
